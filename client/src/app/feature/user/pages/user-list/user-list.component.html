<p-card header="User List">
  <app-state-section [state]="sectionState">
    <p-table [value]="users" [lazy]="true" [paginator]="true" [rows]="pageSize" [totalRecords]="totalRowsCount"
      (onLazyLoad)="paginate($event)" [rowsPerPageOptions]="rowsPerPageOptions" [sortField]="'userName'" [sortOrder]="1"
      responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="userName">Username <p-sortIcon field="userName"></p-sortIcon></th>
          <th pSortableColumn="email">Email <p-sortIcon field="email"></p-sortIcon></th>
          <th pSortableColumn="role">Role <p-sortIcon field="role"></p-sortIcon></th>
          <th pSortableColumn="lastSeen">Last Seen <p-sortIcon field="lastSeen"></p-sortIcon></th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td (click)="viewProfile(user)">{{ user.userName }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.role }}</td>
          <td>{{ user.lastSeen | date: 'short' }}</td>
          <td>
            <p-menu #menu [model]="userActions" appendTo="body" [popup]="true">
              <ng-template pTemplate="item" let-item>
                <div class="p-menuitem-link" (click)="handleClick(item.label,user)">
                  <span [class]="item.icon"></span>
                  <span class="mx-2">{{ item.label }}</span>
                </div>
              </ng-template>
            </p-menu>
            <p-button (onClick)="menu.toggle($event)" text icon="pi pi-ellipsis-v" />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </app-state-section>
</p-card>