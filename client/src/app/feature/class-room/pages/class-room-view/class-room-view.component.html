<p-card header="{{ 'classroom.classroomDetails' | translate }}" class="classroom-details-card">
  <app-state-section [state]="sectionState">
    <div class="details-container">
      <div class="d-flex justify-content-between align-items-center">
        <div class="details-header">
          <h2>{{ 'classroom.classroom' | translate }} {{ classroom.room }}</h2>
          <p>{{ 'classroom.group' | translate }}: {{ classroom.group }}</p>
        </div>
        <div *grantAccess="RolesConstants.EDIT_DELETE_CLASS_ROOM">
          <p-menu #menu [model]="classroomActions" appendTo="body" [popup]="true">
            <ng-template pTemplate="item" let-item>
              <div class="p-menuitem-link" (click)="handleClickClassroomAction(item.label,classroom)">
                <span [class]="item.icon"></span>
                <span class="mx-2">{{ item.label }}</span>
              </div>
            </ng-template>
          </p-menu>
          <p-button (onClick)="menu.toggle($event)" text label="{{ 'classroom.settings' | translate }}" icon="pi pi-spin pi-cog" />
        </div>
      </div>

      <div class="details-content">
        <div class="details-section">
          <h3>{{ 'classroom.basicInformation' | translate }}</h3>
          <div class="info-grid">
            <div class="info-item">
              <strong>{{ 'classroom.studentCost' | translate }}:</strong> {{ classroom.studentCost }} {{ classroom.currencyOfCost | uppercase }}
            </div>
            <div class="info-item">
              <strong>{{ 'classroom.createdAt' | translate }}:</strong> {{ classroom.createdAt | date: 'medium' }}
            </div>
            <div class="info-item">
              <strong>{{ 'classroom.updatedAt' | translate }}:</strong> {{ classroom.updatedAt | date: 'medium' }}
            </div>
          </div>
        </div>

        <div class="details-section">
          <h3>{{ 'classroom.teachers' | translate }}</h3>
          <p-table [value]="classroom.teachers || []">
            <ng-template pTemplate="header">
              <tr>
                <th>{{ 'classroom.teacherName' | translate }}</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-teacher>
              <tr>
                <td>{{ teacher.teacherName }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>

        <div class="details-section">
          <h3>{{ 'classroom.skills' | translate }}</h3>
          <div class="chips-container">
            <p-chip *ngFor="let skill of skills" class="mx-1" [label]="skill"></p-chip>
            <button *grantAccess="RolesConstants.ADD_Edit_SKILL" pButton icon="pi pi-plus" class="m-0 mx-2"
              [rounded]="true" [outlined]="true" severity="secondary" (click)="openAddSkillDialog()"
              type="button"></button>
          </div>
        </div>

        <div class="details-section">
          <h3>{{ 'classroom.schedule' | translate }}</h3>
          <p-accordion>
            <p-accordionTab *ngFor="let day of classroom.schedule" [header]="day.day">
              <p-table [value]="day.domains || []">
                <ng-template pTemplate="header">
                  <tr>
                    <th>{{ 'classroom.domainName' | translate }}</th>
                    <th>{{ 'classroom.startTime' | translate }}</th>
                    <th>{{ 'classroom.endTime' | translate }}</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-domain>
                  <tr>
                    <td>{{ domain.domainName }}</td>
                    <td>{{ domain.startTime }}</td>
                    <td>{{ domain.endTime }}</td>
                  </tr>
                </ng-template>
              </p-table>
            </p-accordionTab>
          </p-accordion>
        </div>

        <div class="details-section">
          <h3>{{ 'classroom.students' | translate }}</h3>
          <p-table [value]="classroom.students || []">
            <ng-template pTemplate="header">
              <tr>
                <th>
                  <div class="d-flex align-items-center">
                    <span class="m-0">{{ 'classroom.studentName' | translate }}</span>
                    <button *grantAccess="RolesConstants.ADD_STUDENT_TO_CLASSROOM" pButton icon="pi pi-plus"
                      class="m-0 mx-2" [rounded]="true" [outlined]="true" severity="secondary"
                      (click)="openAddStudentDialog()" type="button"></button>
                  </div>
                </th>
                <th>{{ 'classroom.actions' | translate }}</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-student>
              <tr>
                <td (click)="viewDetails(student.studentId)">{{ student.studentName }}</td>
                <td>
                  <p-menu #menu [model]="studentAction" appendTo="body" [popup]="true">
                    <ng-template pTemplate="item" let-item>
                      <div class="p-menuitem-link" (click)="handleClick(item.label,student)">
                        <span [class]="item.icon"></span>
                        <span class="mx-2">{{ item.label }}</span>
                      </div>
                    </ng-template>
                  </p-menu>
                  <p-button (onClick)="menu.toggle($event)" text icon="pi pi-ellipsis-v" />
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </app-state-section>
</p-card>
